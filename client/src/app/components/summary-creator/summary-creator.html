<!-- Modal -->
<div class="modal">
  <div class="modal-content">
    <!-- Header with Close Button -->
    <div class="modal-header">
      <h2>Upload Audio</h2>
    </div>

    <!-- Status Message -->
    @if (status() !== 'idle') {
      <div class="status-banner" [class.status-creating]="status() === 'creating'"
           [class.status-transcribing]="status() === 'transcribing'"
           [class.status-completed]="status() === 'completed'"
           [class.status-error]="status() === 'error'">
        @if (status() === 'creating' || status() === 'transcribing') {
          <div class="status-spinner"></div>
        }
        @if (status() === 'completed') {
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
            <polyline points="22 4 12 14.01 9 11.01"/>
          </svg>
        }
        @if (status() === 'error') {
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <line x1="15" y1="9" x2="9" y2="15"/>
            <line x1="9" y1="9" x2="15" y2="15"/>
          </svg>
        }
        <span>{{ statusMessage() }}</span>
      </div>
    }

    <!-- Form -->
    <form (ngSubmit)="transcribe()" class="modal-form">
      <label for="audio-file">Select Audio File</label>
      <input
        id="audio-file"
        type="file"
        (change)="onFileSelected($event)"
        class="modal-input"
        [disabled]="status() === 'creating' || status() === 'transcribing'"
      />

      <label for="audio-title">Title</label>
      <input
        id="audio-title"
        type="text"
        (change)="onTitleChange($event)"
        name="title"
        placeholder="Enter title"
        class="modal-input"
        [disabled]="status() === 'creating' || status() === 'transcribing'"
      />

      <button
        type="button"
        (click)="transcribe()"
        [disabled]="!selectedFile || status() === 'creating' || status() === 'transcribing'"
        class="modal-btn"
      >
        @if (status() === 'creating' || status() === 'transcribing') {
          Processing...
        } @else {
          Upload
        }
      </button>
    </form>
  </div>
</div>